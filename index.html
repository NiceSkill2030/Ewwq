<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Проверка совместимости личности</title>
<style>
body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: #f1f3f8;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 950px;
  margin: 40px auto;
  background: white;
  border-radius: 20px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.1);
  padding: 30px;
}
h1 {
  text-align: center;
  color: #333;
}
.question {
  margin-bottom: 18px;
  padding: 14px;
  border: 1px solid #ddd;
  border-radius: 10px;
  background: #fafafa;
}
.options label {
  display: block;
  margin-top: 5px;
}
button {
  display: block;
  margin: 25px auto;
  padding: 12px 22px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  cursor: pointer;
}
button:hover {
  background: #0056b3;
}
.result {
  margin-top: 25px;
  text-align: center;
  background: #e9f7ef;
  padding: 25px;
  border-radius: 15px;
  display: none;
}
.bar-container {
  width: 100%;
  background: #ddd;
  border-radius: 8px;
  overflow: hidden;
  margin-top: 10px;
  height: 15px;
}
.bar {
  height: 15px;
  background: linear-gradient(90deg,#10b981,#3b82f6);
  width: 0%;
  transition: width 1.2s ease;
}
</style>
</head>
<body>
<div class="container">
<h1>Проверка совместимости личности</h1>
<form id="testForm"></form>
<div id="result" class="result"></div>
</div>

<script>
// Эталонные ответы (50 штук)
const referenceAnswers = [
"A","A","B","A","C","B","A","B","A","B",
"C","A","A","B","C","A","B","C","C","A",
"B","A","B","A","A","A","A","A","A","A",
"A","B","B","A","B","C","A","A","A","A",
"C","C","B","C","B","C","B","C","C","C"
];

// Вопросы
const questions = [
"Мне нравится пробовать новые виды деятельности",
"Я люблю читать книги или статьи, которые заставляют задуматься",
"Я легко воспринимаю новые идеи и изменения",
"Мне интересно изучать другие культуры",
"Я люблю обсуждать абстрактные темы",
"Я ценю искусство и творчество",
"Мне нравится экспериментировать с новыми подходами",
"Я быстро осваиваю новые навыки",
"Я предпочитаю разнообразие в жизни",
"Мне нравится выходить из зоны комфорта",
"Я обычно довожу начатые дела до конца",
"Я заранее планирую свои действия",
"Мне важно соблюдать порядок",
"Я стараюсь выполнять обещания",
"Я редко опаздываю",
"Я предпочитаю действовать по плану",
"Я умею концентрироваться на задаче",
"Я редко откладываю дела на потом",
"Мне нравится систематизировать и структурировать информацию",
"Я несу ответственность за свои действия",
"Мне нравится общаться с новыми людьми",
"Я чувствую себя уверенно в центре внимания",
"Я получаю энергию от общения с другими",
"Мне нравится быть частью группы или команды",
"Я люблю участвовать в социальных мероприятиях",
"Я часто делюсь своими эмоциями с другими",
"Мне нравится активно выражать свои мысли",
"Я легко завожу новые знакомства",
"Я предпочитаю активный отдых, а не пассивный",
"Я люблю командные игры и проекты",
"Я стараюсь помогать другим людям",
"Я легко иду на компромисс",
"Мне важно, чтобы окружающие чувствовали себя хорошо",
"Я умею слушать других",
"Я стараюсь избегать конфликтов",
"Я доверяю людям",
"Я люблю заботиться о близких",
"Я умею прощать ошибки других",
"Я стараюсь быть вежливым и тактичным",
"Я ценю дружеские отношения",
"Я сохраняю спокойствие даже в стрессовых ситуациях",
"Я редко раздражаюсь по пустякам",
"Я умею контролировать свои эмоции",
"Я не поддаюсь панике",
"Я быстро прихожу в норму после неудач",
"Я не принимаю всё близко к сердцу",
"Я умею сохранять хладнокровие в конфликте",
"Я не зацикливаюсь на проблемах",
"Я редко испытываю стресс",
"Я умею сохранять внутренний баланс даже при трудностях"
];

// Выбор 20 случайных вопросов
function getRandomSubset(arr, n) {
  const copy = [...arr];
  const result = [];
  while(result.length < n && copy.length){
    const i = Math.floor(Math.random()*copy.length);
    result.push({text: copy[i], index: arr.indexOf(copy[i])});
    copy.splice(i,1);
  }
  return result;
}

const selected = getRandomSubset(questions, 20);
const form = document.getElementById("testForm");

selected.forEach((q, i)=>{
  const div = document.createElement("div");
  div.className = "question";
  div.innerHTML = `<p>${i+1}. ${q.text}</p>
  <label><input type="radio" name="q${i}" value="A" required> A) Согласен</label>
  <label><input type="radio" name="q${i}" value="B"> B) Иногда</label>
  <label><input type="radio" name="q${i}" value="C"> C) Не согласен</label>`;
  form.appendChild(div);
});

const btn = document.createElement("button");
btn.textContent = "Проверить совместимость";
form.appendChild(btn);

form.addEventListener("submit", (e)=>{
  e.preventDefault();
  const userAnswers = selected.map((q,i)=> form[`q${i}`].value);
  let matches = 0;
  userAnswers.forEach((ans,i)=>{
    const ref = referenceAnswers[selected[i].index];
    if(ans === ref) matches++;
  });
  const percent = Math.round((matches / userAnswers.length) * 100);
  const verdict = percent >= 75 ? "Идеальное совпадение ✅" :
                   percent >= 55 ? "Средняя совместимость ⚠️" :
                   "Низкая совместимость ❌";
  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "block";
  resultDiv.innerHTML = `<h2>Совместимость: ${percent}% — ${verdict}</h2>
  <div class='bar-container'><div class='bar' style='width:${percent}%'></div></div>
  <p>Совпадений: ${matches} из ${userAnswers.length}</p>`;
});
</script>
</body>
</html>
